import React, { useEffect, useRef, useState } from 'react';
import testimonialStyles from '@/styles/testimonials.module.scss';

const testimonials = [
  { name: 'ìµœ*ë¹ˆ', job: 'ì œì•½íšŒì‚¬ ì˜ì—…', review: 'ì ‘ëŒ€ ìžë¦¬ í›„ í•­ìƒ ìž”ëœ© ì·¨í•´ì„œ ì§‘ì— ê°ˆë•Œë§ˆë‹¤ ë¶ˆì•ˆí–ˆëŠ”ë°, í•­ìƒ ì—¬ìž ê¸°ì‚¬ë¶„ì´ ì˜¤ì…”ì„œ ì •ì‹ ì¤„ ë†”ë„ ê±±ì •ì´ ëœ ë©ë‹ˆë‹¤.' },
  { name: 'ì´*ëžŒ', job: 'ìŠ¹ë¬´ì›', review: 'ìž¥ê±°ë¦¬ ë¹„í–‰ ì „ ì˜ˆì•½í•˜ê³  ê°€ë©´ ìƒˆë²½ 2ì‹œì—ë„ ì‹œê°„ ë§žì¶° ì™€ì£¼ì„¸ìš”. ë¹„í–‰ í›„ ì²´ë ¥ ë°©ì „ ìƒíƒœì—ì„œ ì •ë§ êµ¬ì› ê°™ì€ ì„œë¹„ìŠ¤ìž…ë‹ˆë‹¤. ë‚¨ì„± ê¸°ì‚¬ë¶„ë“¤ì€ ê°€ë” ì–´í”¼ ê·¸ëŒ€ë¡œ ê°€ë©´ ìžê¾¸ ížë—ê±°ë¦¬ëŠ” ë¶„ë“¤ ìžˆì–´ì„œ ì¢€ ë¶ˆíŽ¸í–ˆëŠ”ë° ê·¸ëŸ°ê²Œ ì—†ì–´ì„œ ë„ˆë¬´ë„ˆë¬´ ì¢‹ì•„ìš”. ì£¼ë³€ì—ë„ ì†Œë¬¸ë‚´ê³  ìžˆì–´ìš”â˜ºï¸' },
  { name: 'ì‹ *í˜œ', job: 'ì€í–‰ PBì„¼í„° ê·¼ë¬´', review: 'ë‚¨ìž ëŒ€ë¦¬ê¸°ì‚¬ë‹˜ë“¤ê³¼ ë³„ë¡œ ì•ˆì¢‹ì€ ê¸°ì–µë“¤ì´ ìžˆì–´ì„œ ëŒ€ë¦¬ ìž˜ ì•ˆë¶€ë¥´ë ¤ê³  í•˜ëŠ”ë° ì—¬ì„± ì „ìš©ì´ ìžˆë‹¤ê³  í•´ì„œ ë°˜ì‹ ë°˜ì˜ ì¨ë´¤ëŠ”ë° ì™ ê±¸ ë„ˆë¬´ ë§Œì¡±ìŠ¤ëŸ¬ì›Œìš”!! ì—¬ì´ˆ ì§ìž¥ì´ë¼ ì£¼ë³€ ì‚¬ëžŒë“¤í•œí…Œ ë‹¤ ì¶”ì²œí•´ì¤¬ì–´ìš”! ê¸°ì‚¬ë‹˜ë„ ì‹ì§‘ì‚¬ì…”ì„œ ìˆ˜ë‹¤ë–¨ë©´ì„œ ì§‘ì— ì™”ì–´ìš©ðŸ’›' },
  { name: 'ì†¡*ë¦°', job: 'ì£¼ë¥˜íšŒì‚¬ í”„ë¡œëª¨í„°', review: 'íšŒì‹ì—ì„œ ìˆ  ê¶Œìœ í•˜ê³  3ì°¨ 4ì°¨ê¹Œì§€ í•˜ëŠ” íŽ¸ì¸ë° ëŒ€ë¦¬ ì˜ˆì•½í•´ë†¨ë‹¤ê³  ì¤‘ê°„ì— ë‚˜ì˜¬ ìˆ˜ ìžˆì–´ì„œ ì¢‹ì•„ìš”ã…‹ã…‹ ë§¤ë²ˆ 12ì‹œì— ì˜ˆì•½í•´ë†¨ë‹¤ê³  ë§í•˜ê³  ë„ë§ì¹˜ëŠ” ìš©ìœ¼ë¡œ ì“°ê³  ìžˆì–´ìš”ã…‹ã…‹ã…‹' },
  { name: 'ê¹€*ì—°', job: 'ì•„ë‚˜ìš´ì„œ', review: 'ìˆ ë§ˆì‹œê³  ëŒ€ë¦¬ëŠ” ì—¬ê¸°ë¡œ ì •ì°©í–ˆì–´ìš”. ì—¬ìž ê¸°ì‚¬ë‹˜ë§Œ ë°°ì •ë˜ë‹ˆê¹Œ ì‹¬ë¦¬ì ìœ¼ë¡œ íŽ¸í•´ìš”.' },
  { name: 'ìœ¤*í˜„', job: 'ëŒ€í•™êµ ê²¸ìž„êµìˆ˜', review: 'ëŒ€ë¦¬ê¸°ì‚¬ë‚˜ íƒì‹œê¸°ì‚¬ê°€ ë§ê±¸ê³  ê·¸ëŸ°ê±° ì§ˆìƒ‰ì¸ë° ì—¬ê¸´ ì¡°ìš©ížˆ ê°€ê¸° ì„ íƒ ê°€ëŠ¥í•œê²Œ ì¢‹ìŒ.' },
  { name: 'ë‚¨*ì†”', job: 'ëŒ€ê¸°ì—… ê°œë°œìž', review: 'ì°¨ë¥¼ ê°€ì ¸ê°€ëŠ” ë‚ ì—” ê¼­ ìˆ ìžë¦¬ê°€ ìƒê¸°ë”ë¼ê³ ìš”;; ì¨ë³¸ ì—…ì²´ ì¤‘ ê¸°ì‚¬ë‹˜ë“¤ì´ ì ¤ ì¹œì ˆí•´ìš”.' },
  { name: 'ì´*ì€', job: 'ëŒ€ê¸°ì—… ì—°êµ¬ì›', review: 'íšŒì‚¬ê°€ ëŒ€ë¦¬ë¹„ë¥¼ ì§€ì›í•´ì¤˜ì„œ ìˆ ë§ˆì‹œëŠ” ë‚ ì—ë„ ì°¨ë¥¼ ê¼­ ê°€ì§€ê³  ë‹¤ë‹ˆëŠ”ë°ìš”, ë‹¤ë¥¸ë°ì„œ ëŒ€ë¦¬ê¸°ì‚¬ ë¶€ë¥´ë©´ ë‹´ë°° ëƒ„ìƒˆ ë•Œë¬¸ì— ì§œì¦ë‚¬ë˜ì ì´ ë§Žì•˜ê±°ë“ ìš”. ë‹¤ìŒ ë‚  ì•„ì¹¨ì— ì°¨ íƒ€ë©´ ë‹´ë°°ëƒ„ìƒˆ ì•ˆë¹ ì ¸ì„œ í•œì°¸ í™˜ê¸°í•´ì•¼ë˜ê³ . ì—¬ê¸°ëŠ” ì‚¬ì†Œí•œ ë¶€ë¶„ê¹Œì§€ ê´€ë¦¬ëœ ë¶„ì´ ì™€ì„œ ì¢‹ì•„ìš”.' },
  { name: 'ê¹€*í¬', job: 'ì¤‘ì†Œê¸°ì—… ë¹„ì„œ', review: 'ìˆ ì— ì ˆì–´ì„œ ì°¨ì— íƒ„ ê¸°ì–µë„ ì—†ëŠ”ë° ë„ì°©í•´ì„œ ì œê°€ ì •ì‹  ëª»ì°¨ë¦¬ë‹ˆê¹Œ ë¶€ì¶•í•´ì„œ ì§‘ê¹Œì§€ ë„£ì–´ì£¼ì…¨ìŠµë‹ˆë‹¤ã…  ë„ˆë¬´ ê°ì‚¬í•´ìš”ã… ã… ã… ã…  ' },
  { name: 'ëª…*ì§„', job: 'ìž¡ì§€ì‚¬ ë””ë ‰í„°', review: 'ë¯¸ë¦¬ ì˜ˆì•½í•´ë‘ë©´ ê°™ì€ ê¸°ì‚¬ë‹˜ì´ ì™€ì£¼ì‹œëŠ”ê²Œ ê°€ìž¥ ë§ˆìŒì— ë“¤ì–´ìš”. í•­ìƒ ê°™ì€ ê¸°ì‚¬ë‹˜ ë¶€íƒë“œë¦¬ëŠ”ë° ì—„ë§ˆì°¨ íƒ„ ëŠë‚Œ ë“¤ì–´ì„œ ì¢‹ì•„ìš”.' },
  { name: 'ê¹€*ì—°', job: 'ëŒ€ê¸°ì—… ë§ˆì¼€íŒ… íŒ€ìž¥', review: 'ì—°ì¼ ì•¼ê·¼ìœ¼ë¡œ ë„ˆë¬´ í”¼ê³¤í•´ì„œ ë„ì €ížˆ ìš´ì „ì„ ëª»í•  ê²ƒ ê°™ì•„ ì²˜ìŒ ë¶ˆëŸ¬ë´¤ëŠ”ë°, ì‚¬ì „ì— ì¡°ìš©ížˆ ê°€ê¸° ì›í•¨ ì²´í¬í–ˆë”ë‹ˆ ê¸°ì‚¬ë‹˜ì´ ë¶ˆí•„ìš”í•œ ë§ í•œë§ˆë””ë„ ì•ˆí•˜ì…”ì„œ ì¢‹ì•˜ê³  ì—¬ìžë¶„ì´ì…”ì„œ ë§˜ ë†“ê³  ìžë©´ì„œ ì™”ì–´ìš”. ë˜ ì´ìš©í•  ê²ƒ ê°™ì•„ìš”. ' },
  { name: 'ì´*', job: 'ëŒ€ê¸°ì—… ì˜ì—…', review: 'ëê¹Œì§€ ë‹¬ë¦¬ê³  ì§‘ì— ì–´ë–»ê²Œ ì˜¨ì§€ ê¸°ì–µì´ ì•ˆë‚˜ëŠ”ë°.. ê²°ì œ ë‚´ì—­ë³´ê³  ì•ˆì‹¬í•©ë‹ˆë‹¤...' },
  { name: 'ì •*ë¹„', job: 'íŒ¨ì…˜ë§¤ê±°ì§„ íŽ¸ì§‘ìž', review: 'í”„ë¦¬ë¯¸ì—„ ëŒ€ë¦¬ëŠ” ë¹„ì‹¸ê³  ì¼ë°˜ ëŒ€ë¦¬ëŠ” ê¸°ì‚¬ í€„ë¦¬í‹°ê°€ ë³„ë¡œì¸ë° ì—¬ê¸°ëŠ” í•©ë¦¬ì ì¸ ê°€ê²©ì— í€„ë¦¬í‹°ë„ ì¢‹ë„¤ìš”.' },
  { name: 'ì†¡*ì›', job: 'ëŒ€ê¸°ì—… ë””ìžì´ë„ˆ', review: 'ì—¬ìž ê¸°ì‚¬ë‹˜ì´ë¼ ë‚œí­ ìš´ì „ì€ ì•ˆí•˜ì‹œëŠ”ê±°ê°™ì•„ìš”. í†   ì•ˆì ë ¤ì„œ ë§Œì¡±~!' },
];

const CustomerTestimonial = () => {
  const [isMobile, setIsMobile] = useState(false);
  const [paused, setPaused] = useState([false, false, false]);

  useEffect(() => {
    //check initial size
    const checkMobile = () => setIsMobile(window.innerWidth <= 750);
    checkMobile();

    //add resize listener
    window.addEventListener('resize', checkMobile);

    //cleanup on unmount
    return () => window.removeEventListener('resize', checkMobile);
  }, []);

  const columns = [[], [], []];

  testimonials.forEach((t, i) => {
    columns[i % 3].push(t);
  });

  const mergedTestimonials = [...columns[0], ...columns[1], ...columns[2]];
  const repeatedColumns = columns.map((group) => [...group, ...group]);

 
  return (
     <div className={testimonialStyles.testimonialContainer} style={{ flexDirection: isMobile ? 'column' : 'row' }}>
      {isMobile ? (
        <div
          className={testimonialStyles.column}
          onMouseEnter={() => setPaused([true])}
          onMouseLeave={() => setPaused([false])}
        >
          <div className={`${testimonialStyles.carousel} ${!paused[0] ? testimonialStyles.scrollUp : ''}`}>
            {mergedTestimonials.map((t, i) => (
              <div key={i} className={testimonialStyles.card}>
                <div className={testimonialStyles.name}>{t.name}ë‹˜ | <span className={testimonialStyles.job}>{t.job}</span></div>
                <div className={testimonialStyles.review}>{t.review}</div>
              </div>
            ))}
          </div>
        </div>
      ) : (
        repeatedColumns.map((group, i) => (
          <div
            key={i}
            className={testimonialStyles.column}
            onMouseEnter={() => {
              setPaused((prev) => {
                const updated = [...prev];
                updated[i] = true;
                return updated;
              });
            }}
            onMouseLeave={() => {
              setPaused((prev) => {
                const updated = [...prev];
                updated[i] = false;
                return updated;
              });
            }}
          >
            <div
              className={
                testimonialStyles.carousel + ' ' +
                (i === 1 ? testimonialStyles.scrollDown : testimonialStyles.scrollUp)
              }
              style={{ animationPlayState: paused[i] ? 'paused' : 'running' }}
            >
              {group.map((t, index) => (
                <div key={index} className={testimonialStyles.card}>
                  <div className={testimonialStyles.name}>{t.name}ë‹˜ | <span className={testimonialStyles.job}>{t.job}</span></div>
                  <div className={testimonialStyles.review}>{t.review}</div>
                </div>
              ))}
            </div>
          </div>
        ))
      )}
    </div>
  );
}

export default CustomerTestimonial;